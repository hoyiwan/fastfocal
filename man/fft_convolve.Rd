% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fft_convolve.R
\name{fft_convolve}
\alias{fft_convolve}
\title{2D FFT convolution (compatibility wrapper)}
\usage{
fft_convolve(x, kernel, fun = "mean", na.rm = TRUE)
}
\arguments{
\item{x}{numeric matrix. Input values (rows x cols).}

\item{kernel}{numeric matrix. Unnormalized kernel (e.g., 0/1 circle).}

\item{fun}{character. "mean" or "sum".}

\item{na.rm}{logical. If \code{TRUE}, ignore NAs under the kernel; if \code{FALSE},
require a full valid box (terra-compatible gating).}
}
\value{
numeric matrix (rows x cols), aligned to \code{x} and oriented like
\code{terra::values}, i.e., ready to be assigned back after \code{as.vector()}.
}
\description{
Convenience wrapper that performs 2D convolution via FFT using the same
NA semantics and padding strategy as \code{fastfocal(engine = "fft")}.
}
\details{
Internally this delegates to the package's masked FFT implementation
(box gating when \code{na.rm = FALSE}, support-based averaging when
\code{na.rm = TRUE}), and pads to next 5-smooth lengths for stable speed.
}
\examples{
m <- matrix(1:9, 3, 3)
k <- matrix(1, 3, 3)
fft_convolve(m, k, fun = "sum")

# Mean with missing center:
m_na <- m; m_na[2, 2] <- NA
fft_convolve(m_na, k, fun = "mean", na.rm = TRUE)
}
